# Teste da Credere

## Descri√ß√£o
Uma sonda exploradora da NASA pousou em marte. O pouso se deu em uma √°rea retangular, na qual a sonda pode navegar usando uma interface web. A posi√ß√£o da sonda √© representada pelo seu eixo x e y, e a dire√ß√£o que ele est√° apontado pela letra inicial, sendo as dire√ß√µes v√°lidas:

- `E` - Esquerda
- `D` - Direita
- `C` - Cima
- `B` - Baixo

A sonda aceita tr√™s comandos:

- `GE` - girar 90 graus √† esquerda
- `GD` - girar 90 graus √† direta
- `M` - movimentar. Para cada comando `M` a sonda se move uma posi√ß√£o na dire√ß√£o √† qual sua face est√° apontada.

## Endpoints

Esperamos tr√™s endpoints, um que envie a sonda para a posi√ß√£o inicial (0,0); outro deve receber o movimento da sonda e responder com as coordenadas finais, caso o movimento seja v√°lido ou erro caso o movimento seja inv√°lido; e o terceiro deve responder apenas com as coordenadas atuais x e y da sonda.

## Instala√ß√£o/Execu√ß√£o

### Configurando credenciais
Primeiramente, √© necess√°rio configurar a conex√£o com o banco de dados MySQL local, para isso crie o arquivo ```config-dev.json```, adicionando credenciais v√°lidas.

```json
{
  "database": {
    "host": "localhost",
    "user": "usuario",
    "password": "senha",
    "db": "nomeBanco",
    "drive": "mysql"
  }
}
```

Posteriomente, √© necess√°rio a cria√ß√£o do banco de dados, cujo *script* com a tabela necess√°ria se encontra na [raiz](scriptBanco.sql) desse reposit√≥rio. 

### Sem Docker
Para a execu√ß√£o do projeto sem Docker √© necess√°rio ter um servidor local na m√°quina com:
- Apache
- MySQL

### Com Docker üê≥
Para a execu√ß√£o do projeto com Docker √© necess√°rio ter o mesmo instalado na m√°quina. Para inicia-lo:
```bash
$ docker-compose up -d
```
Ap√≥s a execu√ß√£o dos comandos, o servidor estar√° dispon√≠vel em [localhost/](http://localhost/)

## Utiliza√ß√£o

HTTP requisi√ß√£o                      | Descri√ß√£o                            | Exemplo
------------------------------------ | ------------------------------------ | ------------------------
**POST** /sonda                      | Cria uma sonda                       | 
**GET** /sonda/{id}/verificarPosicao | Exibe a posi√ß√£o atual da sonda       | 
**PATCH** /sonda/{id}/movimentar     | Move a sonda                         | 
**PUT** /sonda/{id}/reposicionar     | Retorna a sonda para posi√ß√£o inicial |

### POST /sonda
Cria sonda na posi√ß√£o padr√£o (0,0).
Exemplo de resposta:
```json
{
    "id": 1
}
```

### GET /sonda/{id}/verificarPosicao
Exibe a posi√ß√£o atual da sonda.
Exemplo de resposta:
```json
{
  "eixoX": "0",
  "eixoY": "0",
  "direcao": "D"
}
```

### PATCH /sonda/{id}/movimentar
Move a sonda de acordo com os comandos passados.

### Parametros
Nome           | Tipo        | Descri√ß√£o         | Exemplo
-------------- | ----------- | ----------------- | --------------------------------
 **id**        | **Integer** | requerida na URI  | 
 **movements** | **Array**   | requerido no body | "movements": ["GE", "M", "M", "M", "GD", "M"]

Exemplo de resposta:
```json
{
  "x": 1,
  "y": 3
}
```

### PUT /sonda/{id}/reposicionar
Retorna a sonda para sua posi√ß√£o padr√£o (0,0).

### Parametros

Nome    | Tipo        | Descri√ß√£o        | Exemplo
------- | ----------- | ---------------- | -------------------------
 **id** | **Integer** | requerida na URI | 

Exemplo de resposta:
```json
{
  "Sucesso": "Sonda enviada para nas cordenadas iniciais (0,0)."
}
```

## Desenvolvido com
* PHP 7.2
* MySQL 5.7 

---

<p align="center">
    Desenvolvido com :heart: por <b>Ana Luiza</b>
</p>